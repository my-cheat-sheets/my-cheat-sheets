<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SQL Cheatsheet</title>
</head>
<body>
  <h1>SQL Cheatsheet</h1>

  <!-- Basic CRUD & Queries -->
  <section id="basic">
    <h2>Basic</h2>
    <ul>
      <li><strong>Create / Drop Database</strong>
        <pre><code>
CREATE DATABASE company;
USE company;

DROP DATABASE company;
        </code></pre>
      </li>
      <li><strong>Create / Drop / Alter Table</strong>
        <pre><code>
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    age INT,
    department VARCHAR(50)
);

ALTER TABLE employees ADD COLUMN salary DECIMAL(10,2);

DROP TABLE employees;
        </code></pre>
      </li>
      <li><strong>Select / Insert / Update / Delete</strong>
        <pre><code>
-- Select all columns
SELECT * FROM employees;

-- Select specific columns
SELECT name, age FROM employees WHERE age > 30;

-- Insert
INSERT INTO employees(name, age, department) VALUES('John', 28, 'IT');

-- Update
UPDATE employees SET age = 29 WHERE name = 'John';

-- Delete
DELETE FROM employees WHERE age < 25;
        </code></pre>
      </li>
      <li><strong>Filtering & Sorting</strong>
        <pre><code>
SELECT name, department
FROM employees
WHERE department = 'IT' AND age > 25
ORDER BY age DESC;

SELECT DISTINCT department FROM employees;
        </code></pre>
      </li>
      <li><strong>Limit / Offset</strong>
        <pre><code>
-- PostgreSQL / MySQL / SQLite style:
SELECT * FROM employees LIMIT 10 OFFSET 5;

-- SQL Server style (T‑SQL):
SELECT TOP 10 * FROM employees;
        </code></pre>
      </li>
    </ul>
  </section>

  <!-- Advanced Queries -->
  <section id="advanced">
    <h2>Advanced</h2>
    <ul>
      <li><strong>JOINs (INNER, LEFT, RIGHT, FULL)</strong>
        <pre><code>
SELECT e.name, d.name AS dept_name
FROM employees e
JOIN departments d ON e.dept_id = d.id;

SELECT e.name, d.name
FROM employees e
LEFT JOIN departments d ON e.dept_id = d.id;
        </code></pre>
      </li>
      <li><strong>GROUP BY + Aggregation</strong>
        <pre><code>
SELECT department, COUNT(*) AS num_employees, AVG(salary) AS avg_salary
FROM employees
GROUP BY department
HAVING COUNT(*) > 5;
        </code></pre>
      </li>
      <li><strong>Subqueries & Nested Queries</strong>
        <pre><code>
SELECT name FROM employees 
WHERE dept_id IN (
    SELECT id FROM departments WHERE name = 'IT'
);
        </code></pre>
      </li>
      <li><strong>Views</strong>
        <pre><code>
CREATE VIEW it_employees AS
SELECT name, age, department
FROM employees
WHERE department = 'IT';

-- Use view:
SELECT * FROM it_employees;
        </code></pre>
      </li>
      <li><strong>Transactions & Rollback / Commit</strong>
        <pre><code>
START TRANSACTION;

UPDATE accounts SET balance = balance - 100 WHERE id = 1;
UPDATE accounts SET balance = balance + 100 WHERE id = 2;

COMMIT;

-- if something fails:
ROLLBACK;
        </code></pre>
      </li>
    </ul>
  </section>

  <!-- Pro / Advanced‑2 Section -->
  <section id="pro">
    <h2>Pro / Advanced‑2</h2>
    <ul>
      <li><strong>Window Functions (PostgreSQL / SQL Server / etc.)</strong>
        <pre><code>
SELECT name, salary,
       RANK() OVER (ORDER BY salary DESC) AS salary_rank
FROM employees;
        </code></pre>
      </li>
      <li><strong>Common Table Expressions (CTE)</strong>
        <pre><code>
WITH dept_count AS (
    SELECT dept_id, COUNT(*) AS emp_count
    FROM employees
    GROUP BY dept_id
)
SELECT d.name, dc.emp_count
FROM departments d
JOIN dept_count dc ON d.id = dc.dept_id;
        </code></pre>
      </li>
      <li><strong>Stored Procedures / Functions (example syntax)</strong>
        <pre><code>
-- MySQL syntax
DELIMITER //

CREATE PROCEDURE add_employee(IN nm VARCHAR(50), IN ag INT, IN dept VARCHAR(50))
BEGIN
    INSERT INTO employees(name, age, department) VALUES(nm, ag, dept);
END //

DELIMITER ;

-- Call procedure
CALL add_employee('Alice', 30, 'HR');
        </code></pre>
      </li>
      <li><strong>Indexing & Performance Hints</strong>
        <pre><code>
-- Create index
CREATE INDEX idx_dept ON employees(department);

-- Use index (implicitly)
SELECT * FROM employees WHERE department = 'IT';
        </code></pre>
      </li>
      <li><strong>Set Operations: UNION / INTERSECT / EXCEPT (or MINUS)</strong>
        <pre><code>
SELECT name FROM employees WHERE age < 30
UNION
SELECT name FROM employees WHERE department = 'HR';

-- For duplicates
UNION ALL

-- INTERSECT (some DBs)
SELECT name FROM dept1
INTERSECT
SELECT name FROM dept2;

-- EXCEPT / MINUS (some DBs)
SELECT name FROM dept1
EXCEPT
SELECT name FROM dept2;
        </code></pre>
      </li>
    </ul>
  </section>
</body>
</html>
